@[TOC](第二章)

# 编译基础知识

## 高级语言

### 一、高级语言

高级语言是一个记号系统
+ 语法
+ 语义

------

### 二、语法

+ 任何语言程序都可以看成一定字符集（字母表）上的字符串。
+ 语法使得这串字符形成一个形式上正确的程序。
+ 语法=词法规则+语法规则

eg：0.5*x1+c

+ 0.5、x1、c、*、+是语言的单词符号
+ 0.5*x1+c是语言的语法单位



1. 单词符号

    + 语言中具有独立意义得最基本结构。

    1.1 语法规则

    + 词法规则规定了字母表中哪些字符串是字词符号。
    + 单词符号一般包括：常数、标识符、基本字、算符、界限符等。
    + 我们用正规式和有限自动机理论来描述词法结构和进行词法分析。

------

1. 单词符号
2. 语法单位
    + 表达式、子句、语句、函数、过程、程序
3. 语法规则
    + 规定了如何从单词符号来形成语法单位。
    + 现在多数程序语言使用上下文无关文法来描述语法规则。
    + 语言的词法规则和语法规则定义了程序的形式结构，是判断输入字符串是否构成一个形式上正确的程序得依据。

-----

### 三、语义

+ 对于一个语言来说，不仅要给出它的词法、语法规则，而且要定义它的单词符号和语法单位得意义。
+ 离开语义，语言只是一堆符号得集合。
+ 离开语言中有形式上完全相同的语法单位，含义却不尽相同。
+ 对某种语言，可以定义一个程序的意义的一组规则称为语义规则。
+ 目前，大多数编译程序使用基于属性文法的语法制导翻译方法来分析语义。

----

+ 对于高级程序设计语言及其编译程序来说，语言的语法定义是很重要的。本章主要介绍语法结构的形式描述问题，编译原理的主要内容也可以归结为应用形式语言理论，并将它贯串于词法分析和语法分析两个阶段。
+ 本章重点讨论正规文法、上下文无关文法及其对应的有限自动机和下推自动机，以及在构造编译程序时如何应用。

#### 2.1字母表与符号串

一、相关概念

1.字母表

+ 是符号的非空有穷集合、
+ 用Σ、V表示。

2.符号：

​	是语言中最基本的不可再分的单位。

3.符号串：

+ 符号串是字母表中符号组成的有穷序列。
+ 空串：不含有任何符号的串称作空串，记作ε（epsilon）

4.句子：

​	字母表上符合某种规则构成的串。

5.语言：

​	字母表上句子的集合。

+ 注：约定用a,b,c……表示符号；用α,β,γ……表示符号串；用A,B,C……表示其集合。

----

二、符号串集合的运算

1. 连接(乘积)运算：
    + 定义：若串集A={α~1~,α~2~,α~3~……}，串集{β~1~,β~2~……}，则乘积AB={αβ|α∈A and β∈B}

注：1) 串集的自身乘积称作串集的方幂

​		2) A^0^={ε}

​		3) 字母表A的n次方幂是字母表A上所有长度为n的串集。

+ eg：A{a，b}；B={c，e，d}
+ 则 AB = {ac,ae,ad,bc,be,bd}
+ 例如：串集A={a}的各次方幂定义为：
    + A^0^={ε}
    + A^1^={a}
    + A^2^={aa}
    + A^n^ = A^n-1^A （n>0）={a……a}

----

三、字母表的闭包与正闭包

+ 字母表A的闭包（A^*^）:

    A^*^=A^0^∪A^1^∪A^2^∪……

    即：由A上符号组成的所有串的集合（包括空串ε）。

+ 字母表A的正闭包（A^+^）：

    A^*^=A^1^∪A^2^∪……=A^*^-{ε}

    即：由A上符号组成的所有串的集合（不包括空串ε）.

+ 语言：是字母表上符合某种规则的语句组成的。

    字母表上语言是字母表上正闭包的子集。

---

#### 2.2文法与语言的关系

一、文法的概念

1、文法

​	文法是描述语言的语法结构的形式规则。

+ eg：我们写这样一个句子：

    Young men like pop music.

    + <句子>  ->  <主语><谓语> 
    + <主语>  ->  <形容词><名词> 
    + <谓语>  ->  <动词><宾语> 
    + <宾语>  ->  <形容词><名词> 
    + <形容词> ->  Young|pop
    + <名词>  ->  men|nusic 
    + <句子>  ->  like 

2、相关概念

+ 非终结符
    + 出现在规则的左部、用<>括起来、表示一定语法概念的词。
    + 非终结符集合用V~N~表示。
+ 终结符
    + 语言中不可再分割的字符串（包括单个字符组成的串）。注：终结符是组成句子的基本单位。
    + 非终结符集合用V~T~表示。
+ 开始符号
    + 表示所定义的语法范畴的非终结符。
    + 注：开始符号又称为识别符号。
+ 产生式
    + 用来定义符号串之间关系的一组（语法）规则。
    + 形式：A -> α（A产生α）
+ 推导
    + 推导是从开始符号开始，通过使用产生式的右部取代左部，最终能产生语言的一个句子的过程。
    + 最左推导：每次使用一个规则，以其右部取代符号串最左非终结符
    + 注：最左推导和最右推导称为规范推导。
+ 归约
    + 归约是推导的逆过程，即，从给定的源语言的句子开始，通过规则的左部取代右部，最终到达开始符号的过程。
    + 最左归约是最右推导的逆过程。
    + 注：最左归约和最右归约称为规范归约。
+ 句型、句子和语言
    + 句型：
        + 句型是从文法的开始符号S开始，每步推导（包括0步推导）所得到的字符串α。
        + 记作：S    ---\*--->α，其中α∈（V~N~∪V~T~）^*^
    + 句子：是仅含终结符的句型。

Young men like pop music

<句子>  ->  <主语><谓语>

​			  ->  <形容词><名词><谓语>

​			  -> Young<名词><谓语>

​			  -> Young men <谓语>

​			  -> Young men <动词><宾语>

​			  -> Young men like<宾语>

​			  -> Young men like <形容词><名词>

​			  -> Young men like pop <名词>

​			  -> Young men like pop music.

+ 句型、句子和语言

    + 语言：
        + 语言是由S开始通过一步或一步以上推导所得到的句子的集合。
        + 记为：L(G)   L(G)={α|S-----+------->α，且α∈V~T~^*^}

+ 文法规则的递归定义

    + 非终结符的定义中包含了非终结符自身。

    + 使用文法的递归定义要谨慎

    + eg：字母表A={0，1}

        语法规则为：

        <整数>  -->  <数字><整数>|<数字>

        <数字>  -->  0|1

+ 文法规则的扩充表示

    + 扩充的BNF表示

        + 提因子-----()

            把U->ax|ay|az 改写为U->a（x|y|z）

        + 重复次数的指定------{}

            eg：<标识符>-><字母>{<字母><数字>}^5^~0~

        + 任选符号

            eg：<整数>->[+|-]<数字>{<数字>}

+ 元语言符号

    用来说明文法符号之间关系的符号，如，"->"和"|"称为元语言符号。

-----

二、文法与语言的形式定义

1、Chomsky对文法的定义

​	从形式上说文法G是一个四元式(V~N~,V~T~,P,S)

2、Ckomsky对文法的分类

​	根据对产生式施加的限制，可分为

+ 0型文法

+ 1型文法

+ 2型文法

+ 3型文法

    1、0型文法（短语文法或无限制文法）

    ​	P中产生式α->β，其中α∈V^+^并至少含有一个非终结符，β∈V^*^.

    ​	识别0型语言的自动机称为图灵机（TM）。

    ​	0型文法是对产生式限制最少的文法。

    ​	任何0型语言都是递归可枚举的。

    ​	对0型文法产生式的形式作某些限制，可得到其他类型文法的定义。

    2、1型文法

    ​	P中产生式α->β除可能有S->ε外均有|β|>=|α|，若有S->ε，规定S不得出现在产生式右部。

    ​	或者，P中产生式α->β，除可能有S->ε外均有αAβ-αγβ，其中α，β∈V^*^，A∈V~N~，γ∈V^+^。

    ​	1型文法又称为长度增加文法、上下文有关文法；识别1型语言的自动机称为线性界限自动机（LBA）；1型文法意味着，对非终结符进行替换时务必考虑上下文，并且，一般不允许替换成ε，除非是开始符号产生ε

    3、2型文法

    ​	P中产生式具有形式A->β，其中A∈V~N~，β∈V^*^。

    ​	注：2型文法对产生式的要求是：产生式左部一定是非终结符，产生式右部可以是V~N~、V~T~或ε；非终结符的替换不必考虑上下文；识别2型语言的自动机称为下推自动机（PDA）；2型文法也称为上下文无关文法。

    4、3型文法

    ​	P中产生式具有形式A->αB，A->α，或者A->Bα，A->α，其中A，B∈V~N~，α∈V~T~^*^。

    ​	 注：3型文法也称为正规文法RG、右线性文法或左线性文法；3型文法中的产生式要么均是右线性产生式，要么是左线性产生式，不能既有左线性产生式，又有右线性产生式；若所有产生式均是左线性，则称为左线性文法；若所有产生式均是右线性，则称为右线性文法；识别3型语言的自动机称为有限状态自动机。

3、i型语言

+ 由i型文法生成的语言称为i型语言。
+ 记为：L(G) ; L(G)={w|w∈V~T~^*^，且S--+-->w}



二、文法与语言的形式定义

+ 注意：在词法分析和语法分析中对产生式有限制
    + 不存在P->P产生式
    + 产生式中出现的任何非终结符P必须有用。
        + 从开始符号S出发，存在推导S--*-->αPβ
        + P必须能推导出终结符串。即：P--+--->γ；γ∈V~T~^*^。



一、如何由语言构造文法